
effect Fail with
    fail: Unit -> a

effect Read a with
    read: Unit -> a

read_or_zero f =
    handle Some <| f ()
    | fail () -> None
    | read () -> resume 5u32

foo () =
    if false then fail ()
    read ()

print <| read_or_zero foo

// args: --delete-binary
// expected exit status: 101
// expected stderr:
// thread 'main' panicked at src/name_resolution/mod.rs:331:38:
// not yet implemented
// note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace

